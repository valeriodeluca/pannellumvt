<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pannellum</title>
    <link rel="stylesheet" href="src/css/own.css"/>
    <link rel="stylesheet" href="src/css/pannellum.css"/>
    <link rel="stylesheet" href="plugin/fontawesome5/web-fonts-with-css/css/fontawesome-all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="plugin/leaflet/dist/leaflet.css" />
	  <script type="text/javascript" src="src/js/pannellum.js"></script>
    <script type="text/javascript" src="src/js/libpannellum.js"></script>
    <script src="plugin/leaflet/dist/leaflet.js"></script>
    <style>
  	html {
        height: 100%;
    	}

    	body {
    		margin: 0;
    		padding: 0;
    		overflow: hidden;
    		position: fixed;
    		cursor: default;
    		width: 100%;
    		height: 100%;
    	}

        #panorama {
            width: 100%;
            height: 100%;
        }
      </style>
</head>
<body>
<div id="panorama">
  <div class="header">
    Scene Name
  </div>
  <a href="#" id="mapToggle" onclick="toggleFloor();">
    <!--<img class="icon" src="img/map.png">-->
    [ + ]
  </a>
  <div id="floorBar">
      <div id="mapid"></div>
  </div>
  <div class="footer">
    <a href="http://www.guidonia.org/" target=_blank><img src="src/css/pic/stemma_guidonia.png" height="30" width="21"></a><svg width="5%" height="20"><rect width="5%" height="20" style="fill:rgba(0,0,0,0.0);stroke-width:1;stroke:rgba(0,0,0,0.0)"></svg>
    <a href="http://www.guidonia.org/home/esplorare/cultura/musei/" target=_blank><img src="src/css/pic/logomuseo.png" height="30" width="70"></a><svg width="5%" height="20"><rect width="5%" height="20" style="fill:rgba(0,0,0,0.0);stroke-width:1;stroke:rgba(0,0,0,0.0)"></svg>
    <a href="http://www.unaquantum.com" target=_blank><img src="src/css/pic/unaquantum.png" height="30" width="70"></a><svg width="5%" height="20"><rect width="5%" height="20" style="fill:rgba(0,0,0,0.0);stroke-width:1;stroke:rgba(0,0,0,0.0)"></svg>
    <a href="https://www.martinafrau.it" target=_blank><img src="src/css/pic/martinafrau.png" height="30" width="70"></a><svg width="5%" height="20"><rect width="5%" height="20" style="fill:rgba(0,0,0,0.0);stroke-width:1;stroke:rgba(0,0,0,0.0)"></svg>
  </div>
</div>

<script src="floorplan/polyfloor.js"></script>
<script>
function toggleFloor() {
  var x = document.getElementById("floorBar");
  if (x.style.zIndex === "-1" || x.style.zIndex === "") {
    x.style.zIndex = "2000";
    x.style.opacity = "1.0";
  } else {
    x.style.zIndex = "-1";
    x.style.opacity = "0.0";
  }
}
</script>

<script>
var viewer = pannellum.viewer('panorama', {
  "default": {
    "firstScene": "01_esterno",
    "sceneFadeDuration": 1000,
    "autoRotate": -1.0,
    "autoLoad": true
  },
  "scenes": {
    "01_esterno": {
      "title": "Esterno",
      "hfov": 110,
      "pitch": -3,
      "yaw": 117,
      "type": "multires",
      "multiRes": {
        "basePath": "tiles/01/",
        "path": "/%l/%s%y_%x",
        "fallbackPath": "/fallback/%s",
        "extension": "jpg",
        "tileResolution": 256,
        "maxLevel": 4,
        "cubeResolution": 1704
       },
      "hotSpots": [
          {
              "pitch": -2.1,
              "yaw": 132.9,
              "type": "scene",
              "text": "Ingresso",
              "sceneId": "02_ingresso"
          },
          {
              "pitch": -9.4,
              "yaw": 222.6,
              "type": "info",
              "text": "Art Museum Drive"
          },
        ]
      },
      "02_ingresso": {
        "title": "Ingresso",
        "hfov": 110,
        "pitch": -3,
        "yaw": 117,
        "type": "multires",
        "multiRes": {
          "basePath": "tiles/02/",
          "path": "/%l/%s%y_%x",
          "fallbackPath": "/fallback/%s",
          "extension": "jpg",
          "tileResolution": 512,
          "maxLevel": 3,
          "cubeResolution": 1704
         },
        "hotSpots": [
            {
                "pitch": -2.1,
                "yaw": 132.9,
                "type": "scene",
                "text": "Esterno",
                "sceneId": "01_esterno"
            },
            {
                "pitch": -10.1,
                "yaw": 132.9,
                "type": "scene",
                "text": "Ingresso",
                "sceneId": "03_ingresso"
            }
          ]
        },
        "03_ingresso": {
          "title": "03 Ingresso",
          "hfov": 100,
          "pitch": -3,
          "yaw": 117,
          "type": "multires",
          "multiRes": {
            "basePath": "tiles/03_ingresso/",
            "path": "/%l/%s%y_%x",
            "fallbackPath": "/fallback/%s",
            "extension": "jpg",
            "tileResolution": 512,
            "maxLevel": 3,
            "cubeResolution": 1704
           },
          "hotSpots": [
              {
                  "pitch": -2.1,
                  "yaw": 132.9,
                  "type": "scene",
                  "text": "Primo cortile",
                  "sceneId": "04_primocortile"
              }
            ]
          },
          "04_primocortile": {
            "title": "04 Primo cortile",
            "hfov": 100,
            "pitch": -3,
            "yaw": 117,
            "type": "multires",
            "multiRes": {
              "basePath": "tiles/04_primocortile/",
              "path": "/%l/%s%y_%x",
              "fallbackPath": "/fallback/%s",
              "extension": "jpg",
              "tileResolution": 512,
              "maxLevel": 3,
              "cubeResolution": 1704
             },
            "hotSpots": [
                {
                    "pitch": -2.1,
                    "yaw": 132.9,
                    "type": "scene",
                    "text": "Ingresso",
                    "sceneId": "02_ingresso"
                }
              ]
            }
      }
});

var mq = window.matchMedia( "(max-width: 600px)" );
var mymap = L.map('mapid', {
  attributionControl:false,
  maxZoom:11,
  minZoom:10
}).setView([0.274263968563446, 0.204430991238951], 10);

function style_polyfloor(feature) {
    return {
      color: '#ffffff',
      fillColor: '#0000ff',
      weight: 1.3,
      dashArray: '',
      opacity: 1.0,
      fillOpacity: 0.0
    }
};

var polyfloorJSON = new L.geoJson(polyfloor,{
  //onEachFeature: pop_strade,
  style: style_polyfloor,
  interactive: false
}).addTo(mymap);

function fmarker1() {
  viewer.loadScene('01_esterno');
  if (mq.matches) {
    toggleFloor();
  }
}

var icon1 = L.divIcon({
  className: 'location-pin',
  html: '<div class="numberCircle">1</div>',
  iconSize: [30, 30],
  //iconAnchor: [18, 30]
  iconAnchor: [10, 33]
});

var marker1 = L.marker([0.204430991238951,0.204430991238951],{icon: icon1}).addTo(mymap);
marker1.on('click', fmarker1);
</script>
</body>
</html>
